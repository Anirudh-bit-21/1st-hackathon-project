<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coding Practice - GLA Placement Prep Hub</title>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    keyframes: {
                        spinner: {
                            '0%': { transform: 'rotate(0deg)' },
                            '100%': { transform: 'rotate(360deg)' },
                        }
                    },
                    animation: {
                        'spinner': 'spinner 1s linear infinite',
                    }
                }
            }
        }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .dynamic-text { font-family: 'Poppins', sans-serif; }
        .language-card.selected {
            transform: scale(1.05);
            border-color: #0ea5e9; /* sky-500 */
            box-shadow: 0 4px 14px 0 rgba(14, 165, 233, 0.3);
        }
        .dark .language-card.selected {
            border-color: #6366f1; /* indigo-500 */
            box-shadow: 0 4px 14px 0 rgba(99, 102, 241, 0.3);
        }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 transition-colors duration-500">

    <header class="bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm sticky top-0 z-50 shadow-md shadow-slate-200/50 dark:shadow-black/20 border-b border-slate-200 dark:border-slate-800">
        <div class="max-w-7xl mx-auto flex justify-between items-center py-4 px-6">
            <a href="main.html" class="flex items-center">
                <img src="https://glaonline.com/certificate/images/gla-logo-12-b.png" alt="GLA University Logo" class="h-8 w-auto mr-3">
                <span class="text-xl font-bold text-slate-800 dark:text-slate-200">GLA Placement Prep Hub</span>
            </a>
            <div class="flex items-center space-x-4">
                <button id="theme-toggle" class="p-2 rounded-full text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors duration-300">
                    <svg id="sun-icon" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                    <svg id="moon-icon" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>
                </button>
                <div class="relative">
                    <button id="profile-button" class="flex items-center space-x-2">
                        <img class="h-10 w-10 rounded-full" src="https://via.placeholder.com/150" alt="User avatar">
                        <span class="hidden md:block font-semibold">Shahvez</span>
                        <svg class="h-5 w-5 text-slate-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                    </button>
                    <div id="profile-menu" class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-md shadow-lg py-1 border border-slate-200 dark:border-slate-700">
                        <a href="profile.html" class="block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700">My Profile</a>
                        <a href="index.html" class="block px-4 py-2 text-sm text-red-500 dark:text-red-400 hover:bg-slate-100 dark:hover:bg-slate-700">Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-6 my-10">
        <div class="text-center" data-aos="fade-down">
            <h1 class="dynamic-text text-4xl font-bold text-sky-600 dark:text-indigo-400">Coding Practice Central</h1>
            <p class="mt-2 text-lg text-slate-500 dark:text-gray-400">Generate practice sets and solve doubts with our AI assistant.</p>
        </div>
        
        <div id="practice-form" class="mt-10 max-w-4xl mx-auto" data-aos="fade-up" data-aos-delay="200">
            <div class="mb-8">
                <label class="text-lg font-semibold mb-3 block">1. Choose Your Language</label>
                <div id="language-selector" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div data-lang="Python" class="language-card cursor-pointer bg-white dark:bg-slate-800 p-4 rounded-xl shadow border-2 border-transparent text-center transition-all duration-300"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg" class="h-10 mx-auto pointer-events-none" /><p class="mt-2 font-semibold pointer-events-none">Python</p></div>
                    <div data-lang="Java" class="language-card cursor-pointer bg-white dark:bg-slate-800 p-4 rounded-xl shadow border-2 border-transparent text-center transition-all duration-300"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg" class="h-10 mx-auto pointer-events-none" /><p class="mt-2 font-semibold pointer-events-none">Java</p></div>
                    <div data-lang="C++" class="language-card cursor-pointer bg-white dark:bg-slate-800 p-4 rounded-xl shadow border-2 border-transparent text-center transition-all duration-300"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/cplusplus/cplusplus-original.svg" class="h-10 mx-auto pointer-events-none" /><p class="mt-2 font-semibold pointer-events-none">C++</p></div>
                    <div data-lang="JavaScript" class="language-card cursor-pointer bg-white dark:bg-slate-800 p-4 rounded-xl shadow border-2 border-transparent text-center transition-all duration-300"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg" class="h-10 mx-auto pointer-events-none" /><p class="mt-2 font-semibold pointer-events-none">JavaScript</p></div>
                </div>
            </div>
            <div class="mb-8">
                <label class="text-lg font-semibold mb-3 block">2. Select Difficulty</label>
                <div id="difficulty-selector" class="flex justify-start space-x-2 bg-slate-200 dark:bg-slate-800 p-1 rounded-xl max-w-sm">
                    <button data-level="Easy" class="difficulty-btn w-full px-4 py-2 rounded-lg font-semibold text-slate-600 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-700 transition-all duration-300">Easy</button>
                    <button data-level="Medium" class="difficulty-btn w-full px-4 py-2 rounded-lg font-semibold text-slate-600 dark:text-slate-300 bg-white dark:bg-slate-900 shadow transition-all duration-300">Medium</button>
                    <button data-level="Hard" class="difficulty-btn w-full px-4 py-2 rounded-lg font-semibold text-slate-600 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-700 transition-all duration-300">Hard</button>
                </div>
            </div>
            <div>
                <p id="form-error" class="text-red-500 text-sm h-4 mb-2"></p>
                <button id="generate-button" class="py-3 px-10 rounded-lg shadow-lg text-lg font-semibold text-white bg-gradient-to-r from-sky-500 to-cyan-500 dark:from-indigo-500 dark:to-purple-500 hover:opacity-90 transition-opacity">Generate Problems</button>
            </div>
        </div>

        <div id="results-section" class="mt-12 hidden" data-aos="fade-up">
            <div id="loader" class="text-center"><div class="w-12 h-12 border-4 border-sky-500 dark:border-indigo-500 border-t-transparent rounded-full animate-spinner mx-auto"></div><p class="mt-4 text-slate-500 dark:text-gray-400">AI is generating your personalized practice set...</p></div>
            <div id="results-content" class="hidden"></div>
        </div>
    </main>
    
    <button id="glai-open-button" class="fixed bottom-8 right-8 bg-gradient-to-r from-sky-500 to-cyan-500 dark:from-indigo-500 dark:to-purple-500 text-white w-16 h-16 rounded-full shadow-lg flex items-center justify-center transform hover:scale-110 transition-transform z-40">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M6.343 6.343l-.707-.707m12.728 10.607l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
    </button>
    <div id="glai-overlay" class="fixed inset-0 bg-black/40 z-40 hidden transition-opacity"></div>
    <div id="glai-panel" class="fixed top-0 right-0 h-full w-full max-w-md bg-white dark:bg-slate-800 shadow-2xl z-50 transform translate-x-full transition-transform duration-300 ease-in-out">
        <div class="flex flex-col h-full">
            <div class="flex justify-between items-center p-4 border-b border-slate-200 dark:border-slate-700">
                <h2 class="dynamic-text text-2xl font-bold text-sky-600 dark:text-indigo-400">GLAI Assistant</h2>
                <button id="glai-close-button" class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div class="flex-grow p-6 overflow-y-auto">
                <p class="text-sm text-slate-500 dark:text-gray-400 mb-4">Stuck on a concept? Ask any technical question below.</p>
                <textarea id="ai-question-input" rows="4" placeholder="e.g., Explain polymorphism in Java..." class="w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-slate-50 dark:bg-slate-900/50"></textarea>
                <button id="ai-ask-button" class="w-full mt-3 py-2 px-4 rounded-md font-semibold text-white bg-sky-600 dark:bg-indigo-500 hover:opacity-90 transition-opacity">Get Answer</button>
                <div id="ai-answer-container" class="mt-4 text-sm"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Theme, Profile, AOS, and Panel Logic ---
            const themeToggleBtn = document.getElementById('theme-toggle');
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');
            const docElement = document.documentElement;
            const applyTheme = (theme) => { if (theme === 'dark') { docElement.classList.add('dark'); sunIcon.classList.add('hidden'); moonIcon.classList.remove('hidden'); } else { docElement.classList.remove('dark'); sunIcon.classList.remove('hidden'); moonIcon.classList.add('hidden'); } };
            const toggleTheme = () => { const currentTheme = docElement.classList.contains('dark') ? 'light' : 'dark'; localStorage.setItem('theme', currentTheme); applyTheme(currentTheme); };
            themeToggleBtn.addEventListener('click', toggleTheme);
            const userTheme = localStorage.getItem('theme');
            const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (userTheme === 'dark' || (!userTheme && systemTheme)) { applyTheme('dark'); } else { applyTheme('light'); }
            const profileButton = document.getElementById('profile-button');
            const profileMenu = document.getElementById('profile-menu');
            profileButton.addEventListener('click', (e) => { e.stopPropagation(); profileMenu.classList.toggle('hidden'); });
            document.addEventListener('click', (e) => { if (!profileButton.contains(e.target) && !profileMenu.contains(e.target)) { profileMenu.classList.add('hidden'); } });
            AOS.init({ duration: 800, once: true });
            const glaiOpenButton = document.getElementById('glai-open-button');
            const glaiCloseButton = document.getElementById('glai-close-button');
            const glaiPanel = document.getElementById('glai-panel');
            const glaiOverlay = document.getElementById('glai-overlay');
            const openPanel = () => { glaiOverlay.classList.remove('hidden'); glaiPanel.classList.remove('translate-x-full'); };
            const closePanel = () => { glaiOverlay.classList.add('hidden'); glaiPanel.classList.add('translate-x-full'); };
            glaiOpenButton.addEventListener('click', openPanel);
            glaiCloseButton.addEventListener('click', closePanel);
            glaiOverlay.addEventListener('click', closePanel);
            
            // --- Shared API Call Logic ---
            async function callGeminiAPI(prompt) {
                const API_KEY = "AIzaSyAqBvqiSPy6JVfOISl-YCPdK896nkq0WA0";
                const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${API_KEY}`;
                const requestBody = { contents: [{ parts: [{ text: prompt }] }] };
                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(requestBody)
                    });
                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(`API Error: ${errorData.error.message}`);
                    }
                    const data = await response.json();
                    return data.candidates[0].content.parts[0].text;
                } catch (error) {
                    console.error("Error calling Gemini API:", error);
                    throw error;
                }
            }

            // --- Problem Generator Logic ---
            let selectedLanguage = null;
            let selectedDifficulty = 'Medium';
            const languageSelector = document.getElementById('language-selector');
            const difficultySelector = document.getElementById('difficulty-selector');
            const generateButton = document.getElementById('generate-button');
            const formError = document.getElementById('form-error');
            const resultsSection = document.getElementById('results-section');
            const loader = document.getElementById('loader');
            const resultsContent = document.getElementById('results-content');
            
            // ===== SELECTION LOGIC RESTORED =====
            languageSelector.addEventListener('click', (e) => {
                const card = e.target.closest('.language-card');
                if (!card) return;
                languageSelector.querySelectorAll('.language-card').forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
                selectedLanguage = card.dataset.lang;
            });

            difficultySelector.addEventListener('click', (e) => {
                const button = e.target.closest('.difficulty-btn');
                if (!button) return;
                difficultySelector.querySelectorAll('.difficulty-btn').forEach(b => {
                    b.classList.remove('bg-white', 'dark:bg-slate-900', 'shadow');
                });
                button.classList.add('bg-white', 'dark:bg-slate-900', 'shadow');
                selectedDifficulty = button.dataset.level;
            });
            // =====================================
            
            // State Management for Visited Links
            const visitedLinks = JSON.parse(localStorage.getItem('visitedLinks')) || {};
            const COMPLETION_TIME = 60000;
            const iconInProgress = `<svg class="w-5 h-5 text-gray-400 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>`;
            const iconCompleted = `<svg class="w-5 h-5 text-green-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>`;

            function checkAllLinksStatus() {
                document.querySelectorAll('a.problem-link').forEach(link => {
                    const url = link.href;
                    if (visitedLinks[url]) {
                        const status = visitedLinks[url].status;
                        const time = visitedLinks[url].time;
                        const statusIcon = link.querySelector('.status-icon');
                        if (status === 'completed' || (Date.now() - time > COMPLETION_TIME)) {
                            statusIcon.innerHTML = iconCompleted;
                            if (visitedLinks[url].status !== 'completed') {
                                visitedLinks[url].status = 'completed';
                                localStorage.setItem('visitedLinks', JSON.stringify(visitedLinks));
                            }
                        } else if (status === 'inprogress') {
                            statusIcon.innerHTML = iconInProgress;
                            setTimeout(() => {
                                const currentLink = document.querySelector(`a[href="${url}"]`);
                                if(currentLink) currentLink.querySelector('.status-icon').innerHTML = iconCompleted;
                                visitedLinks[url].status = 'completed';
                                localStorage.setItem('visitedLinks', JSON.stringify(visitedLinks));
                            }, COMPLETION_TIME - (Date.now() - time));
                        }
                    }
                });
            }

            resultsContent.addEventListener('click', (e) => {
                const link = e.target.closest('a.problem-link');
                if (!link) return;
                const url = link.href;
                const statusIcon = link.querySelector('.status-icon');
                if (!visitedLinks[url]) {
                    visitedLinks[url] = { status: 'inprogress', time: Date.now() };
                    localStorage.setItem('visitedLinks', JSON.stringify(visitedLinks));
                    statusIcon.innerHTML = iconInProgress;
                    setTimeout(() => {
                        const currentLink = document.querySelector(`a[href="${url}"]`);
                        if(currentLink) currentLink.querySelector('.status-icon').innerHTML = iconCompleted;
                        visitedLinks[url].status = 'completed';
                        localStorage.setItem('visitedLinks', JSON.stringify(visitedLinks));
                    }, COMPLETION_TIME);
                }
            });
            
            generateButton.addEventListener('click', async () => {
                if (!selectedLanguage) { formError.textContent = 'Please choose a language.'; return; }
                formError.textContent = '';
                resultsSection.classList.remove('hidden');
                loader.classList.remove('hidden');
                resultsContent.classList.add('hidden');
                resultsContent.innerHTML = '';
                const prompt = `You are an expert placement preparation mentor. Generate a practice set for ${selectedLanguage} at ${selectedDifficulty} level. The output MUST be ONLY raw JSON. The JSON must have keys: "leetCode" (objects with "title", "url"), "hackerRank" ( objects with "title", "url"), "keyConcepts" (array of 3 strings), and "resources" (2 objects with "title", "url", "description").`;
                try {
                    const aiResponse = await callGeminiAPI(prompt);
                    const startIndex = aiResponse.indexOf('{');
                    const endIndex = aiResponse.lastIndexOf('}') + 1;
                    if (startIndex === -1 || endIndex === 0) { throw new Error("No valid JSON object found in AI response."); }
                    const jsonString = aiResponse.substring(startIndex, endIndex);
                    const parsedData = JSON.parse(jsonString);
                    displayResults(parsedData);
                } catch (e) {
                    resultsContent.innerHTML = `<div class="bg-red-100 dark:bg-red-900/50 border border-red-400 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg"><p><strong>Error:</strong> Failed to process AI response.</p><p class="text-sm mt-2">Details: ${e.message}</p></div>`;
                } finally {
                    loader.classList.add('hidden');
                    resultsContent.classList.remove('hidden');
                }
            });

            function displayResults(data) {
                const createProblemList = (problems) => {
                    if (!problems || problems.length === 0) return '<p class="text-slate-500 dark:text-gray-400">No problems generated.</p>';
                    return problems.map(p => `<a href="${p.url}" target="_blank" class="problem-link flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-800 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700/60 transition-colors"><div class="flex items-center"><span class="text-sky-500 dark:text-indigo-400">&#10148;</span><span class="ml-3">${p.title}</span></div><span class="status-icon w-5 h-5 flex-shrink-0"></span></a>`).join('');
                };
                const createResourceList = (resources) => {
                    if (!resources || resources.length === 0) return '<p class="text-slate-500 dark:text-gray-400">No resources generated.</p>';
                    return resources.map(r => `<div class="p-4 bg-slate-100 dark:bg-slate-800 rounded-lg"><a href="${r.url}" target="_blank" class="font-semibold text-sky-600 dark:text-indigo-400 hover:underline">${r.title}</a><p class="text-sm text-slate-500 dark:text-gray-400 mt-1">${r.description}</p></div>`).join('');
                };
                const createConceptsList = (concepts) => {
                    if (!concepts || concepts.length === 0) return '';
                    return `<div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700"><h3 class="text-xl font-semibold mb-4 flex items-center"><svg class="h-6 w-6 mr-3 text-sky-500 dark:text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" /></svg>Key Concepts to Study</h3><div class="flex flex-wrap gap-2">${concepts.map(c => `<span class="bg-sky-100 text-sky-800 text-sm font-medium px-3 py-1 rounded-full dark:bg-sky-900/50 dark:text-sky-300">${c}</span>`).join('')}</div></div>`;
                };
                const html = `<div class="space-y-8">${createConceptsList(data.keyConcepts)}<div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div><h3 class="text-xl font-semibold mb-4 flex items-center"><img src="https://leetcode.com/static/images/LeetCode_logo_rvs.png" class="h-5 mr-2 filter dark:invert" alt="LeetCode">LeetCode Problems</h3><div class="space-y-3">${createProblemList(data.leetCode)}</div></div><div><h3 class="text-xl font-semibold mb-4 flex items-center"><img src="https://th.bing.com/th/id/OIP.em27EGx_yzzUXqHdmfhhdgHaHa?w=155&h=180&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3" class="h-5 mr-2" alt="HackerRank">HackerRank Problems</h3><div class="space-y-3">${createProblemList(data.hackerRank)}</div></div></div><div><h3 class="text-xl font-semibold mb-4 flex items-center"><svg class="h-6 w-6 mr-3 text-sky-500 dark:text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>Top ${selectedLanguage} Resources</h3><div class="space-y-3">${createResourceList(data.resources)}</div></div></div>`;
                resultsContent.innerHTML = html;
                checkAllLinksStatus();
            }

            // --- GLAI Slider (AI Doubt Solver) Logic ---
            const askButton = document.getElementById('ai-ask-button');
            const questionInput = document.getElementById('ai-question-input');
            const answerContainer = document.getElementById('ai-answer-container');
            
            askButton.addEventListener('click', async () => {
                const question = questionInput.value;
                if (!question.trim()) return;
                answerContainer.innerHTML = `<div class="flex items-center justify-center p-2"><div class="w-6 h-6 border-2 border-sky-500 dark:border-indigo-500 border-t-transparent rounded-full animate-spinner"></div></div>`;
                const prompt = `Explain the following computer science concept clearly and concisely for a student preparing for job interviews. Use simple terms and a short code example in Python if applicable. Concept: "${question}"`;
                try {
                    const response = await callGeminiAPI(prompt);
                    const formattedResponse = response.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\*(.*?)\*/g, '<em>$1</em>').replace(/```(\w*)\n([\s\S]*?)```/g, '<pre class="bg-slate-100 dark:bg-slate-900 p-2 rounded-md text-xs my-2 overflow-x-auto"><code>$2</code></pre>').replace(/`(.*?)`/g, '<code class="bg-slate-200 dark:bg-slate-700 px-1 rounded-sm text-red-500 dark:text-red-400">$1</code>').replace(/\n/g, '<br>');
                    answerContainer.innerHTML = `<div class="p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-700">${formattedResponse}</div>`;
                } catch (e) {
                     answerContainer.innerHTML = `<div class="p-4 bg-red-100 dark:bg-red-900/50 rounded-lg border border-red-200 dark:border-red-700 text-red-700 dark:text-red-300"><strong>Error:</strong> ${e.message}</div>`;
                }
            });
        });
    </script>
</body>
</html>
